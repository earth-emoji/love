<div id="comments" class="ui comments">
    {% for comment in post.get_comments %}
    {% if not comment.parent%}
        <div class="ui divider"></div>
        
        <div class="comment">
            <a class="avatar">
                <img
                    src="{{ MEDIA_URL }}{{ comment.author.user.photo }}"
                />
            </a>
            <div class="content">
                <a class="author"
                    >{{ comment.author.user.username }}</a
                >
                <div class="metadata">
                    <span class="date"
                        >Created at: {{ comment.created_at }}</span
                    >
                </div>
                <div class="text">
                    <p>{{ comment.content }}</p>
                </div>

                <form class="reply-form" class="ui fluid reply form mt-3" method="POST" action="{{ comment.post_reply_url }}">
                    <div class="field">
                        <textarea name="reply-content"></textarea>
                    </div>
                    <button type="submit" class="ui blue labeled submit icon button">
                        <i class="icon edit"></i> Add Reply
                    </button>
                </form>
            </div>
            <div class="comments">
                {% for reply in comment.get_replies %}
                <div class="comment">
                    <a class="avatar">
                        <img
                            src="{{ MEDIA_URL }}{{ reply.author.user.photo }}"
                        />
                    </a>
                    <div class="content">
                        <a class="author"
                            >{{ reply.author.user.username }}</a
                        >
                        <div class="metadata">
                            <span class="date"
                                >Created at: {{ reply.created_at }}</span
                            >
                        </div>
                        <div class="text">
                            <p>{{ reply.content }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    {% endfor %}
</div>